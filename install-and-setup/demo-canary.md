## Good to know

### VIRTUAL SERVICES && DESTINATION RULES
- IT WILL HELP IN THE TRAFFIC MANAGMENT RULES OF ISTIO
- IN OUR USECASE VIRTUAL SERVICE AND DESTINATION RULES WILL HELP US IN IMPLEMENTING CANARY MODEL OF DEPLOYMENT.

### PROBLEM STATEMENT
- AS OF NOW BOOK REVIEWS ARE GETTING REFELCTED FROM DIFFERENT DIFFERENT VERSIONS LIKE V1 TO V3
- ![image](https://github.com/pavankumar0077/istio-guide/assets/40380941/ba0c268b-02d0-4bc8-bfcd-b206d2d4224f)
- BUT NOW I WANT TO ONLY REVIEWS V1, ALL THE TIME, THEN WE WILL INTRODUCE A NEW VERSION LET'S SAY REVIEWS V2
- THEN I ONLY WANT 50% OF THE TRAFFIC TO GO TO REVIEWS V2 AND 50 % OF THE TRAFFIC GO TO REVIEWS V3
- AS OF NOW IT IS CONTINUOSLY CHANGING FROM V1 TO V3, LET'S MAKE TO TALK TO ONLY V1 INITIALLY 
- TRAFFIC SHIFTING IS NOTHING BUT CANARY MODEL

### SOLUTION :
- DEPLOY old-version.yaml file
- HERE KIND -- **VirtualService** for detail where EVERY REQUEST SHOULD GO TO THE DESTINATION DETAILS V1.
- DESTINATION -- IT IS ANOTHER CUSTOM RESOURCE WHERE WE ARE GOING TO CREATE AND IN THE DESTINATION WE WILL MENTION THE SUBSET V1 WILL ONLY POINT TO THE VERSION ONE OF DETAILS.
- SIMILARLY WHEN WE ARE TAKING ABOUT **RATINGS**  OFCOURSE ALL OF THEM HAVE VERSION 1, SO THE REVIEWS VIRTUAL SERVICE IS SAYING ANY REQUEST THAT COMES TO THE REVIEWS MICROSERVICES OR THE SIDECAR CONTAINER THEY SHOULD GO TO DESTINATIONS REVIEWS SUBSET V1, Now we have to cerate this destination and in the destination we will say REQEUST SHOULD ONLY GO THE POD WITH VERSION 1 
